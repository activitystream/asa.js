!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("whatwg-fetch")):"function"==typeof define&&define.amd?define(["whatwg-fetch"],t):t()}(0,function(){"use strict";var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t=setTimeout;function n(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void a(t.promise,e)}i(t.promise,r)}else(1===e._state?i:a)(t.promise,e._value)})):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void s((o=n,i=t,function(){o.apply(i,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){a(e,t)}var o,i}function a(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,r)),r},r.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},r.all=function(e){return new r(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(t){i(e,t)},n)}r[e]=a,0==--o&&t(r)}catch(e){n(e)}}for(var a=0;a<r.length;a++)i(a,r[a])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var u,f=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();if(f.Promise||(f.Promise=r),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),window.localStorage)try{localStorage.localStorage=1,delete localStorage.localStorage}catch(e){var l=function(){var e={};return{setItem:function(t,n){e[t]=n},getItem:function(t){return e[t]},removeItem:function(t){delete e[t]}}},p=l(),h=l();Object.defineProperties(window,{localStorage:{get:function(){return p}},sessionStorage:{get:function(){return h}}})}!function(e){e[e.utm_campaign=0]="utm_campaign",e[e.utm_medium=1]="utm_medium",e[e.utm_source=2]="utm_source",e[e.utm_content=3]="utm_content",e[e.utm_term=4]="utm_term",e[e.length=5]="length"}(u||(u={})),function(e){e.forEach=Array.prototype.forEach,e.map=Array.prototype.map}(u||(u={}));var d=function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.campaign=t,this.medium=n,this.source=r,this.content=o,this.term=i},m=function(){var e=ae.referrer&&new URL(ae.referrer),t=ae.location&&new URL(ae.location),n=u.map(function(n){return e&&e.searchParams.get(n)||t&&t.searchParams.get(n)||ie.sessionStorage.getItem("__as."+n)||void 0});return n.some(function(e){return!!e})&&new(Function.prototype.bind.apply(d,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))))};var y=function(){return Math.round(Math.random()*Date.now())},v=0;function g(e){return function(e){for(var t=v?"0123456789ABCDEF":"0123456789abcdef",n="",r=void 0,o=0;o<e.length;o++)r=e.charCodeAt(o),n+=t.charAt(r>>>4&15)+t.charAt(15&r);return n}(function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n=Array(80),r=1732584193,o=-271733879,i=-1732584194,a=271733878,c=-1009589776,s=0;s<e.length;s+=16){for(var u=r,f=o,l=i,p=a,h=c,d=0;d<80;d++){n[d]=d<16?e[s+d]:S(n[d-3]^n[d-8]^n[d-14]^n[d-16],1);var m=_(_(S(r,5),b(d,o,i,a)),_(_(c,n[d]),w(d)));c=a,a=i,i=S(o,30),o=r,r=m}r=_(r,u),o=_(o,f),i=_(i,l),a=_(a,p),c=_(c,h)}return Array(r,o,i,a,c)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}(e),8*e.length))}(function(e){var t="",n=-1,r=void 0,o=void 0;for(;++n<e.length;)r=e.charCodeAt(n),o=n+1<e.length?e.charCodeAt(n+1):0,55296<=r&&r<=56319&&56320<=o&&o<=57343&&(r=65536+((1023&r)<<10)+(1023&o),n++),r<=127?t+=String.fromCharCode(r):r<=2047?t+=String.fromCharCode(192|r>>>6&31,128|63&r):r<=65535?t+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):r<=2097151&&(t+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return t}(e)))}function b(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function w(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function _(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function S(e,t){return e<<t|e>>>32-t}var O={getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,r,o,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(n)switch(n.constructor){case Number:a=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(o?"; domain="+o:"")+(r?"; path="+r:"")+(i?"; secure":""),!0},removeItem:function(e,t,n){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,n=0;n<t;n++)e[n]=decodeURIComponent(e[n]);return e}},E=function(){var e=I()+"."+g(y());return O.setItem("__as_user",e,1/0,"/"),e},j=function(){var e=O.getItem("__as_user");return(!e||e.length>70||e.length<40)&&(e=E()),e},I=function(){return g(ie.location.host)},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var A={get:function(e){try{return O.getItem(e)}catch(t){throw new Error("Error while trying to get item from session cookie:"+e)}},set:function(e,t){try{return O.setItem(e,t,1/0,"/")}catch(n){throw new Error('Error while trying to set item to session cookie: "'+e+'" <- '+t)}},remove:function(e){try{O.removeItem(e)}catch(t){throw new Error('Error while trying to remove item from session cookie: "'+e)}}},T={hasItem:A.get,getItem:A.get,setItem:A.set,removeItem:A.remove},x=function(){function e(){P(this,e)}return k(e,[{key:"hasSession",value:function(){var e=T.getItem("__asa_session");try{return!!(e&&JSON.parse(e).t>new Date)}catch(e){return!1}}},{key:"createSession",value:function(e){T.setItem("__asa_session",JSON.stringify(Object.assign({},e,{id:I()+"."+g(j()+"."+y()),t:(new Date).getTime()+18e5})))}},{key:"destroySession",value:function(){return T.removeItem("__asa_session")}},{key:"getSession",value:function(){return JSON.parse(T.getItem("__asa_session"))}},{key:"updateTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSession(),t=e.campaign,n=e.referrer,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}(e,["campaign","referrer"]),o=Object.assign({},this.getSession(),r,t&&{campaign:t},n&&{referrer:n},{t:(new Date).getTime()+18e5});T.setItem("__asa_session",JSON.stringify(o))}}]),e}(),C=new x,R={getSession:function(){return C.getSession()},createSession:function(e){return C.createSession(e)},hasSession:function(){return C.hasSession()},updateTimeout:function(e){return C.updateTimeout(e)},destroySession:function(){return C.destroySession()}},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();console||(window.console={}),console.log||(window.console.log=function(){});var F=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._logger=e.none}return U(e,[{key:"mode",value:function(t){this._logger=t?e.console:e.none}},{key:"log",value:function(){this._logger.apply(this,arguments)}},{key:"force",value:function(){e.console.apply(e,arguments)}}],[{key:"none",value:function(){}},{key:"console",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["asa.js"].concat(n))})}]),e}());function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(){return J(Array.prototype.reduce.call(document.querySelectorAll('head > meta[property^="og:"]'),function(e,t){return Object.assign({},e,L({},t.getAttribute("property"),t.getAttribute("content")))},{keywords:document.querySelector('head > meta[name="keywords"]')&&document.querySelector('head > meta[name="keywords"]').getAttribute("content")}))},J=function(e,t){return e},N=function(e){var t="string"==typeof e?document.querySelectorAll(e):e,n=[].map.call(t,function(e){return J(function e(t){if(t.hasAttribute("itemscope")){var n=Array.prototype.reduce.call(t.children,function(t,n){return Object.assign({},t,L({},n.getAttribute("itemprop"),e(n)))},{});return t.getAttribute("itemtype")&&(n={type:t.getAttribute("itemtype"),properties:n}),n}return t.hasAttribute("itemprop")?t.getAttribute("content")||t.innerText||t.src:{__items:[].map.call(t.children,e)}}(e),e)}).filter(function(e){return e});return n.length>1?{__items:n}:n.pop()};var $="1.1.77",D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var W,z=function(e){return!(!e||!(e instanceof HTMLElement||e[0]instanceof HTMLElement||"string"==typeof e))&&e};!function(e){var t=function(){function e(){G(this,e);var t=R.getSession(),n=t.id,r=t.referrer,o=t.campaign,i=fe(),a=le();this.origin=ie.location.origin,this.occurred=new Date,o&&(this.campaign=o),this.user={did:j(),sid:n},this.page={url:ie.location.href},r&&(this.page.referrer=r),oe.id&&(this.tenant=oe.id),i&&(this.partner_id=i),a&&(this.partner_sid=a),this.v=$}return D(e,[{key:"toJSON",value:function(){return JSON.parse(JSON.stringify(Object.assign({},this)))}},{key:Symbol.toPrimitive,value:function(){return this.type}}]),e}();e.Event=t;var n;!function(e){!function(e){!function(e){var n=function(e){function n(){G(this,n);var e=q(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.type="as.web.order.reviewed",e}return H(n,t),n}();e.reviewed=n}(e.order||(e.order={}));!function(e){!function(e){var n=function(e){function n(){G(this,n);var e=q(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.type="as.web.customer.account.provided",e}return H(n,t),n}();e.provided=n}(e.account||(e.account={}))}(e.customer||(e.customer={}));!function(e){var n=function(e){function n(e){G(this,n);var t=q(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(z(e)){var r=N(e);r&&(t.meta=r)}else t.meta=Object.assign({},e,M());return t}return H(n,t),n}();e.product=n;!function(e){var t=function(e){function t(){G(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.type="as.web.product.availability.checked",e}return H(t,n),t}();e.checked=t}(e.availability||(e.availability={}));var r=function(e){function t(){G(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.type="as.web.product.carted",e}return H(t,n),t}();e.carted=r;var o=function(e){function t(){G(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.type="as.web.product.searched",e}return H(t,n),t}();e.searched=o;!function(e){var t=function(e){function t(){G(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.type="as.web.product.shipping.selected",e}return H(t,n),t}();e.selected=t}(e.shipping||(e.shipping={}));var i=function(e){function t(){G(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.type="as.web.product.viewed",e}return H(t,n),t}();e.viewed=i}(e.product||(e.product={}));!function(e){var n=function(e){function n(){G(this,n);var e=q(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.type="as.web.payment.completed",e}return H(n,t),n}();e.completed=n}(e.payment||(e.payment={}))}(e.web||(e.web={}))}(n=e.as||(e.as={})),e.web={"as.web.customer.account.provided":n.web.customer.account.provided,"as.web.order.reviewed":n.web.order.reviewed,"as.web.product.availability.checked":n.web.product.availability.checked,"as.web.product.carted":n.web.product.carted,"as.web.product.searched":n.web.product.searched,"as.web.product.shipping.selected":n.web.product.shipping.selected,"as.web.product.viewed":n.web.product.viewed,"as.web.payment.completed":n.web.payment.completed}}(W||(W={}));var B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Q=function(e,t){return("0"+Math.abs(t)).slice(-e)},V=function(e){function t(){return K(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Date),B(t,[{key:"toJSON",value:function(){var e=-this.getTimezoneOffset(),n=new t(this);return n.setMinutes(this.getMinutes()+e),n.toISOString().slice(0,-1)+(~Math.sign(e)?"+":"-")+Q(2,e/60)+":"+Q(2,e%60)}}]),t}(),X=function(e,t){return fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"text/plain; charset=UTF-8"}})},Y=function(e){return t={ev:e,t:new V},X("//inbox.activitystream.com/asa",t);var t},Z=function(e,t){return X("//inbox.activitystream.com/asa/error",{err:e,context:t,v:$})},ee=new(function(){function e(){var t=this;K(this,e),this._dispatchEvent=Y,this._dispatchError=Z,this.pendingSubmission=[],this.done=!0,this.submitEvent=function(e){return t._dispatchEvent(e)},this.submitError=function(e,n){return t._dispatchError(e,n)}}return B(e,[{key:"batchEvent",value:function(e){this.pendingSubmission.push(e)}},{key:"batchOn",value:function(){var e=this;this.batchIntervalHandler=setInterval(function(){try{if(e.pendingSubmission.length>0&&e.done){var t=Math.min(e.pendingSubmission.length,10),n=e.pendingSubmission.slice(0,t);e.done=!1,n.forEach(function(t){return Y(t).then(function(){return e.pendingSubmission.splice(0,n.length)}).catch(F.log)})}}catch(e){F.log("exception submitting",e)}},400)}},{key:"batchOff",value:function(){this.batchIntervalHandler?clearInterval(this.batchIntervalHandler):F.log("cannot batch off, it is not on")}},{key:"override",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._dispatchEvent,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dispatchError;this._dispatchError=t,this._dispatchEvent=e}},{key:"reset",value:function(){this._dispatchError=Z,this._dispatchEvent=Y}}]),e}()),te=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ne(e){return R.destroySession(),this.setTenant(e),this.setProviders([]),function e(t){for(var n=this,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];try{if(!W.web[t]){var a;if(re[t])(a=re[t]).call.apply(a,[this].concat(o));return}var c=m(),s=function(){var e=ae.referrer&&new URL(ae.referrer).host,t=ae.location&&new URL(ae.location).host;return e&&t&&e!==t&&!~n.providers.indexOf(e)?e:null}();R.hasSession()?s&&(R.updateTimeout({campaign:c,referrer:s}),F.log("session resumed")):(F.log("no session, starting a new one"),R.createSession({campaign:c,referrer:s})),ee.submitEvent(new(Function.prototype.bind.apply(W.web[t],[null].concat(o))))}catch(e){F.force("inbox exception:",e),ee.submitError(e,{location:"processing inbox message",arguments:[event].concat(o)})}return e.bind(this)}.bind(this)}ne.prototype=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return te(e,[{key:"setTenant",value:function(e){this.id=e}},{key:"setProviders",value:function(e){this.providers=e.map(function(e){return new URL(e).host})}}]),e}());var re={"custom.session.created":function(e,t,n){C=new(function(r){function o(){return P(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,x),k(o,[{key:"hasSession",value:function(){return e()}},{key:"getSession",value:function(){return t()}},{key:"createSession",value:function(e){n(e)}}]),o}())},"connected.partners.provided":function(e){var t=e,n=function(e){var n=e.target,r=n.href;if(r){var o=new URL(r);~t.indexOf(o.host)&&(o.searchParams.set(ce,ie.asa.id),o.searchParams.set(se,R.getSession().id),u.forEach(function(e){var t=ie.sessionStorage.getItem("__as."+e);t&&o.searchParams.set(e,t)}),n.href=o.href)}};document.addEventListener("mousedown",n),document.addEventListener("keyup",n),document.addEventListener("touchstart",n)},"service.providers.provided":ne.prototype.setProviders,"tenant.id.provided":ne.prototype.setTenant,"debug.mode.enabled":F.mode,"metadata.transformer.provided":function(e){J=function(t,n){try{return e(t,n)}catch(e){return t}}}},oe=new ne,ie={sessionStorage:window.sessionStorage,location:window.location,asa:oe},ae={location:document.location,referrer:document.referrer},ce="__as.partner_id",se="__as.partner_sid",ue=function(){var e,t,n;new URL(ae.referrer).host!==new URL(ie.location.origin).host&&(e=new URL(ie.location.href),t=e.searchParams.get(ce),n=e.searchParams.get(se),u.forEach(function(t){var n=decodeURIComponent(e.searchParams.get(t)||"");n?ie.sessionStorage.setItem("__as."+t,n):ie.sessionStorage.removeItem("__as."+t)}),t?ie.sessionStorage.setItem(ce,t):ie.sessionStorage.removeItem(ce),n?ie.sessionStorage.setItem(se,n):ie.sessionStorage.removeItem(se))},fe=function(){return ie.sessionStorage.getItem(ce)},le=function(){return ie.sessionStorage.getItem(se)};!function(){try{var e=window.asa&&window.asa.q||[];window.asa=oe,ue(),e.forEach(function(e){return window.asa(e)})}catch(e){F.force("exception during init: ",e),ee.submitError(e,{location:"boot script"})}}()});
